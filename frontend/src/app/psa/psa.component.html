<div class="card">
  <h5 class="card-header form-inline">
    Post Storm Assessment
    <select class="form-control form-control-lg ml-3">
      <option>Select a storm</option>
      <option *ngFor="let storm of namedStorms">{{ storm.name }}</option>
    </select>
  </h5>
  <div class="card-body">
    <div class="row">
      <!--
      <div class="col-sm-4">
        <div class="list-group">
          <li class="list-group-item list-group-item-action active">
            Delaware Bay
          </li>
        </div>
      </div>
      -->
      <div class="col-sm">

        <ngx-loading [show]="isLoading"></ngx-loading>

        <div class="d-flex justify-content-between align-items-center">
          <h1>Delaware Bay</h1>
          <h6>
            <a [href]="demoDataURL" target="_blank">
              <span class="oi oi-cloud-download"></span>
              OPeNDAP
            </a>
          </h6>
        </div>
        <div class="card-text">
          This is the DFLow FM simulation on Delaware Bay and River domain. Dflow was forced with GFS winds during the spinup period and with HWRF winds during
          the simulation. The computational domain covers Delaware River and Bay up to the mouth of the Bay.
        </div>
        <div id="map" class="mt-3 position-relative">
          <ngx-loading [show]="isLoadingMap"></ngx-loading>
          <div id="map-controls">
            <div class="text-right">
              <button type="button" class="btn btn-sm btn-light" (click)="isMapControlsCollapsed = !isMapControlsCollapsed" [attr.aria-expanded]="!isMapControlsCollapsed">
                <span *ngIf="isMapControlsCollapsed" class="oi oi-chevron-left"></span>
                <span *ngIf="!isMapControlsCollapsed" class="oi oi-chevron-right"></span>
              </button>
            </div>
            <div [ngbCollapse]="isMapControlsCollapsed">
              <div class="card">
                <div class="card-body">
                  <div class="form-group">
										<label>Map Layer</label>
										<select [formControl]="mapLayerInput" class="form-control form-control-sm">
											<option *ngFor="let option of mapLayerOptions" [value]="option.value">{{ option.name }}</option>
										</select>
                  </div>
                  <div class="form-group">
                    <label>Data Opacity</label>
                    <input type="number" step=".1" min=".1" max="1" [formControl]="mapDataOpacityInput" class="form-control form-control-sm">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="map-info" *ngIf="currentFeature && !extentCoords">
            {{ currentFeature.title }} ({{ featureConfidence(currentFeature.title) }}% confidence)
          </div>
        </div>
        <div>
          <small class="d-block"><sup>1</sup>Hold <i>Shift</i> and drag to select a box to filter the data to download.</small>
          <small class="d-block"><sup>2</sup>Hover to see feature information.</small>
          <div class="mt-4">
            <div class="card">
              <div class="card-header">
                Data Controls
              </div>
              <div class="card-body">
                <div class="form-group">
                  <label>Variable</label>
                  <select [formControl]="contourVariableInput" class="form-control">
                    <option value="mesh2d_waterdepth">Water Depth</option>
                    <option value="mesh2d_windx">Wind X</option>
                    <option value="mesh2d_windy">Wind Y</option>
                  </select>
                </div>
                <div class="row align-items-center">
                  <div class="col-md-2">
                    <small>{{ getDateMin() }}</small>
                  </div>
                  <div class="col-md-8 form-group">
                    <label>Date</label>
                    <input type="range" [formControl]="contourDateInput" min="0" [max]="getDateInputMax()" class="w-100">
                  </div>
                  <div class="col-md-2 justify-content-end">
                    <small>{{ getDateMax() }}</small>
                  </div>
                </div>
                <div class="w-100 text-center"><i>{{ getContourDateFormatted(contourDateInput.value) }}</i></div>
                <div class="mt-4">
                  <i>Download selected data: </i>
                  <a *ngIf="extentCoords" [href]="filteredDownloadURL()">Link</a>
                  <i *ngIf="!extentCoords">(none selected)</i>
                </div>
              </div>
            </div>
          </div>
          <div class="card mt-3">
            <div class="card-header">Data Video</div>
            <div class="card-body">
							<video controls class="w-100" #animation>
								<source [src]="currentAnimationURL()" type="video/mp4">
								Your browser does not support the video tag.
							</video>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
